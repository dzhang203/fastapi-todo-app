<!DOCTYPE html>
<html>
<head>
    <title>Debug Todo App</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .pass { background: #d4edda; }
        .fail { background: #f8d7da; }
    </style>
</head>
<body>
    <h1>Todo App Debug Test</h1>
    <div id="tests"></div>
    
    <script>
        const tests = document.getElementById('tests');
        
        function addTest(name, pass, details) {
            const div = document.createElement('div');
            div.className = `test ${pass ? 'pass' : 'fail'}`;
            div.innerHTML = `
                <strong>${pass ? '✅' : '❌'} ${name}</strong>
                <br>${details}
            `;
            tests.appendChild(div);
        }
        
        // Test 1: API connectivity
        async function testAPI() {
            try {
                const response = await fetch('http://localhost:8000/todos/');
                const data = await response.json();
                addTest('API Connection', true, `Got ${data.length} todos`);
                return true;
            } catch (error) {
                addTest('API Connection', false, `Error: ${error.message}`);
                return false;
            }
        }
        
        // Test 2: DOM elements
        function testDOM() {
            const elements = [
                'add-todo-form',
                'todo-input', 
                'todos-list',
                'loading',
                'error-message',
                'empty-state',
                'todo-item-template'
            ];
            
            let allFound = true;
            let details = '';
            
            elements.forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    details += `✅ ${id} found<br>`;
                } else {
                    details += `❌ ${id} missing<br>`;
                    allFound = false;
                }
            });
            
            addTest('DOM Elements', allFound, details);
            return allFound;
        }
        
        // Test 3: CSS loading
        function testCSS() {
            const body = document.body;
            const styles = window.getComputedStyle(body);
            const bgColor = styles.backgroundColor;
            
            addTest('CSS Loading', bgColor !== 'rgba(0, 0, 0, 0)', `Background color: ${bgColor}`);
        }
        
        // Test 4: Fonts
        function testFonts() {
            const body = document.body;
            const styles = window.getComputedStyle(body);
            const fontFamily = styles.fontFamily;
            
            addTest('Font Loading', fontFamily.includes('Anonymous'), `Font: ${fontFamily}`);
        }
        
        // Run all tests
        async function runTests() {
            console.log('Running debug tests...');
            
            await testAPI();
            testDOM();
            testCSS();
            testFonts();
            
            // Test form submission
            const form = document.getElementById('add-todo-form');
            if (form) {
                addTest('Form Element', true, 'Form found and accessible');
            } else {
                addTest('Form Element', false, 'Form not found');
            }
        }
        
        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>